defaults:
  - _self_
  - serve: emu3_5_test

experiment:
  exp_name: emu3_5_test
  exp_dir: outputs/${experiment.exp_name}
  task:
    type: serve
    entrypoint: null
  runner:
    hostfile: null # /path/to/hostfile.txt
    deploy:
      port: 9710
      use_fs_serve: true
      enable_composition: true
      name: /emu3_5
      working_dir: /path/to/FlagScale
      request:
        - arg: prompt            # the text prompt for generation
          type: str
        - arg: reference_image   # a list containing reference image paths
          type: Optional[list]
          required: false
          default: ["/path/to/assets/ref_img.png", "/path/to/assets/ref_1.png"]
  cmds:
    before_start: export RAY_DEDUP_LOGS=0 && export VLLM_USE_V1=1

action: run

hydra:
  run:
    dir: ${experiment.exp_dir}/hydra
